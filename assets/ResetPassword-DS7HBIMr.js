import{m,b as g,_ as h,r as l,o as r,c,d as u,t as S,y,z as D,n as f,g as _,f as p,V as v,M as V,B as x,e as d,w as A,v as I,p as C,h as E}from"./index-BueGtXLM.js";const k={name:"password-input",props:{label:String},data(){return{password:"",isValid:Boolean,password_reg:/(?=.*[0-9])(?=.*[!@#$%^&*_-])(?=.*[a-z])(?=.*[A-Z]).{8,}/g,showPass:!1}},computed:{...m(["IS_VALID"])},methods:{...g(["SET_PASSWORDS"]),validation(t){if(this.password===""){this.isValid=!0;return}else this.password!==""&&(this.isValid=!1);this.password_reg.test(this.password)?(console.log(this.password_reg.test(this.password)),this.isValid=!0):(console.log(this.password_reg.test(this.password)),this.isValid=!1);const s=this.getInputData(t);this.SET_PASSWORDS(s)},getInputData(t){return{input:this.getInputEl(t),value:this.password,isValid:this.isValid}},getInputEl(t){return t.target.closest("[data-id]").querySelector(".input")},showPassword(t){const s=this.getInputEl(t);if(s.attributes.type.textContent==="password"){s.attributes.type.textContent="text",this.showPass=!this.showPass;return}s.attributes.type.textContent==="text"&&(s.attributes.type.textContent="password",this.showPass=!this.showPass)}}},R={class:"input-box"},W={for:"password",class:"form-label"};function B(t,s,n,w,e,a){const i=l("font-awesome-icon");return r(),c("div",R,[u("label",W,S(n.label),1),y(u("input",{type:"password",class:f(["input",{invalid:!this.isValid}]),"onUpdate:modelValue":s[0]||(s[0]=o=>e.password=o),onInput:s[1]||(s[1]=o=>a.validation(o)),placeholder:"Пароль"},null,34),[[D,e.password,void 0,{trim:!0}]]),e.showPass?(r(),_(i,{key:0,icon:"fa-solid fa-eye",onClick:s[2]||(s[2]=o=>a.showPassword(o))})):p("",!0),e.showPass?p("",!0):(r(),_(i,{key:1,icon:"fa-solid fa-eye-slash",class:"icon",onClick:s[3]||(s[3]=o=>a.showPassword(o))}))])}const O=h(k,[["render",B],["__scopeId","data-v-b3abb1a1"]]),M={name:"create-password-form",components:{PasswordInput:O,ValidationErrors:v,MySemipolarSpinner:V},data(){return{title:"Создание нового пароля",label_1:"Пароль",label_2:"Повторите пароль",btn:null,successMsg:!1,showPreloader:!1}},computed:{...m(["PASSWORDS"]),isBntDisable(){try{return this.PASSWORDS.password_1===this.PASSWORDS.password_2&&this.PASSWORDS.isValidPassword_1===!0&&this.PASSWORDS.isValidPassword_2===!0}catch(t){return console.log(t),""}},showErrorMsg(){return!!(this.PASSWORDS.password_2&&!this.isBntDisable)}},methods:{...x(["CREATE_NEW_PASSWORD"]),createPassword(){this.showPreloader=!0;const t={token:this.$route.query.reset_token,new_password:this.PASSWORDS.password_1},s=localStorage.getItem("site_role");this.CREATE_NEW_PASSWORD(t).then(()=>{this.showPreloader=!1,this.successMsg=!0,setTimeout(()=>{this.$router.push(`/${s}/signin`),this.successMsg=!1},2e3)}).catch(n=>console.log(n))}},mounted(){this.btn=document.querySelector(".btn")}},T={class:"my-window"},N={class:"title"},$={key:0,class:"error"},q={key:1,class:"success"};function z(t,s,n,w,e,a){const i=l("validation-errors"),o=l("password-input"),b=l("my-semipolar-spinner"),P=l("my-color-btn");return r(),c("div",T,[u("h2",N,S(e.title),1),d(i),d(o,{label:e.label_1,"data-id":"1"},null,8,["label"]),d(o,{label:e.label_2,"data-id":"2"},null,8,["label"]),a.showErrorMsg?(r(),c("p",$,"Пароли не совпадают")):p("",!0),e.successMsg?(r(),c("p",q,"Смена пароля прошла успешно")):p("",!0),e.showPreloader?(r(),_(b,{key:2,class:"preloader"})):p("",!0),d(P,{class:f(["btn",{disabled:!a.isBntDisable}]),disabled:!a.isBntDisable,onClick:a.createPassword},{default:A(()=>[I("Создать пароль ")]),_:1},8,["class","disabled","onClick"])])}const F=h(M,[["render",z],["__scopeId","data-v-aed44a47"]]),G={name:"reset-password",components:{CreatePasswordForm:F}},L=t=>(C("data-v-bddb7a8a"),t=t(),E(),t),U=L(()=>u("h1",{class:"visually-hidden"},"Смена пароля",-1));function Z(t,s,n,w,e,a){const i=l("create-password-form");return r(),c("div",null,[U,d(i,{class:"createPassword"})])}const H=h(G,[["render",Z],["__scopeId","data-v-bddb7a8a"]]);export{H as default};
