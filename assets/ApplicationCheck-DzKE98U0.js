import{A as D}from"./ApplicationDocs-CZUIwnfV.js";import{b as f}from"./ApplicationForm-BukldAMN.js";import{A as P}from"./ApplicationUploadFoto-BuFRFUlh.js";import{m as g,b as w,B as F,_ as M,r as p,o as i,c as _,d as t,n as l,t as e,e as o,f as a,F as L,i as Y,H as C,g as h,w as A,v,p as k,h as U}from"./index-CJPfqmld.js";const V={name:"application-check",components:{ApplicationForm:f,ApplicationUploadFoto:P,ApplicationDocs:D},data(){return{files:[],value:"",inputTitle_1:"инвойс",inputTitle_2:"упаковочный лист",isApplicationComplete:!0,showPreloader:!1,showError:!1}},computed:{...g(["COUNTRY","CITY","APPLICATION_NAME","APPLICATION_DESCRIPTION","SERVICES","SHIPPING","UPLOAD_IMG_INPUT","DIALOG","TITLE","ADDRESS_FROM","FACTORY_CONTACT","CURRENT_USER","INVOICE","PACKING_LIST","COMPANY_NAME","INN","BANK_NAME","CURRENCY_TYPE","DOCS","FIRMS","WEIGHT","CAPACITY","DATE_OF_READINESS","TO_ADDRESS","QUANTITY","WRONG_FILE","COMMENT_FOR_SERVICE"]),companyName(){return this.FIRMS[0].long_name?`${this.FIRMS[0].long_name}, ИНН ${this.FIRMS[0].inn}`:""},bankName(){return this.BANK_NAME?`${this.BANK_NAME} ${this.CURRENCY_TYPE}`:""},descriptionValidation(){return this.$route.name==="cost-calculation"?!!(this.APPLICATION_DESCRIPTION&&this.QUANTITY&&this.WEIGHT&&this.CAPACITY):!!(this.APPLICATION_DESCRIPTION&&this.QUANTITY&&this.WEIGHT&&this.CAPACITY&&this.DATE_OF_READINESS)},isInputCityValid(){return this.$route.name==="cost-calculation"?!this.CITY:!this.CITY||!this.TO_ADDRESS},showEditBtn(){return this.$route.query.status==="UNPUBLISHED"}},methods:{...w(["SET_UPLOAD_IMG_INPUT","SHOW_DIALOG","SET_SELECTED_ID","SET_ACTIVE_MODULE","SET_IS_APPLICATION_COMPLETE","SET_FILTER_TYPE","SET_ORDER_TYPE"]),...F(["UPLOAD_DOCS","COST_CALCULATION_ORDER_CREATE"]),isApplicationCompleteFn(){switch(this.$route.name){case"cost-calculation":return this.COUNTRY&&this.CITY&&this.APPLICATION_NAME&&this.APPLICATION_DESCRIPTION&&this.WEIGHT&&this.CAPACITY&&(this.SERVICES.length||this.COMMENT_FOR_SERVICE)&&this.SHIPPING&&this.ADDRESS_FROM.from_city&&this.ADDRESS_FROM.from_address?(this.isApplicationComplete=!0,!0):(this.isApplicationComplete=!1,!1);default:return this.COUNTRY&&this.CITY&&this.TO_ADDRESS&&this.APPLICATION_NAME&&this.APPLICATION_DESCRIPTION&&this.WEIGHT&&this.CAPACITY&&this.DATE_OF_READINESS&&(this.SERVICES.length||this.COMMENT_FOR_SERVICE)&&this.SHIPPING&&this.ADDRESS_FROM.from_city&&this.ADDRESS_FROM.from_address&&this.FACTORY_CONTACT.agent_fullname&&this.FACTORY_CONTACT.agent_phone_number&&this.FACTORY_CONTACT.agent_email&&this.DOCS.order_invoice.name&&this.DOCS.order_packing_list.name?(this.isApplicationComplete=!0,!0):(this.isApplicationComplete=!1,!1)}},changeData(s){if(this.$route.path!=="/customer")if(s.target.closest(".summary__item"))this.SHOW_DIALOG(),this.SET_SELECTED_ID(s.target.closest(".summary__item").getAttribute("id"));else return},saveApplicationToLocalStorage(){const s={firm_id:this.FIRMS[0].fid,from_country:this.COUNTRY,from_city:this.ADDRESS_FROM.city,from_address:this.ADDRESS_FROM.street,agent_fullname:this.FACTORY_CONTACT.fio,agent_phone_number:this.FACTORY_CONTACT.phone,agent_email:this.FACTORY_CONTACT.email,to_country:"Россия",to_city:this.CITY,to_address:this.TO_ADDRESS,name:this.APPLICATION_NAME,description:this.APPLICATION_DESCRIPTION,additional_services:this.SERVICES,delivery_type:this.SHIPPING,quantity:this.QUANTITY,gross:"string",net:this.WEIGHT,cargo_volume:this.CAPACITY,date_of_cargo_readiness:this.DATE_OF_READINESS,created_at:Date.now()};localStorage.setItem("newApplicationDelivery",JSON.stringify(s));const c=this.DOCS.order_invoice.file;localStorage.setItem("customerInvoice",JSON.stringify(c));const d=this.DOCS.order_packing_list.file;localStorage.setItem("packingList",JSON.stringify(d));const T=this.DOCS.images.files;localStorage.setItem("numberOfPhoto",T.length),T.forEach((m,r)=>{localStorage.setItem(`applicationFoto_${r+1}`,JSON.stringify(m))})},goToCustomerPage(){if(!this.isApplicationCompleteFn()){setTimeout(()=>{this.isApplicationComplete=!0},3e3);return}switch(this.$route.name){case"customer-new-application":this.CURRENT_USER?(this.SET_ORDER_TYPE("delivery"),localStorage.setItem("application_type","delivery"),this.SET_ACTIVE_MODULE("application"),this.$router.push("/customer?module=select_company")):(this.saveApplicationToLocalStorage(),this.SET_IS_APPLICATION_COMPLETE(this.isApplicationComplete),this.$router.push("/customer/signin"));break;case"cost-calculation":this.showPreloader=!0,this.SET_ORDER_TYPE("cost"),localStorage.setItem("application_type","cost"),this.SET_ACTIVE_MODULE("application"),this.$router.push("/customer?module=select_company");break}}}},E=s=>(k("data-v-28fa3964"),s=s(),U(),s),b={class:"main"},q={class:"summary__item",id:"country"},G={class:"wr"},H={class:"summary__answer"},B={class:"summary__item",id:"cities"},$={class:"wr"},W={class:"summary__answer"},Q={class:"summary__item",id:"naming"},J={class:"wr"},K={class:"summary__answer"},z={class:"summary__item",id:"description"},j={class:"wr"},X={class:"summary__answer"},Z={class:"summary__answer"},x={class:"summary__answer"},ss={class:"summary__answer"},ts={key:0,class:"summary__answer"},es={class:"summary__item",id:"additional_services"},is={class:"wr"},os={class:"summary__answer"},as={class:"summary__ul"},ns={key:0,class:"summary__li"},_s={class:"summary__item",id:"delivery_type"},rs={class:"wr"},cs={class:"summary__question"},ls={class:"summary__answer"},ms={class:"summary__item",id:"info1"},ps={class:"wr"},us={class:"summary__answer"},hs={key:0,class:"summary__item",id:"info2"},Ts={class:"wr"},ds={class:"summary__answer"},Cs=E(()=>t("p",{class:"summary__question"},"Фирма",-1)),As={class:"summary__answer"},Es=E(()=>t("p",{class:"summary__question"},"Рекизиты",-1)),Is={class:"summary__answer"},Ss={class:"photo-wr"},Os={class:"btn-wr"},Ns={key:1,class:"warning"},Rs={key:3,class:"error"};function ys(s,c,d,T,m,r){const n=p("font-awesome-icon"),I=p("application-upload-foto"),S=p("application-docs"),O=p("my-white-btn"),N=p("my-semipolar-spinner"),R=p("application-form"),y=p("my-dialog");return i(),_("div",b,[t("section",{class:"summary",onClick:c[2]||(c[2]=u=>r.changeData(u))},[t("div",q,[t("div",G,[t("p",{class:l(["summary__question",{warning:!s.COUNTRY}])},e(s.TITLE.country),3),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",H,e(s.COUNTRY),1)]),t("div",B,[t("div",$,[t("p",{class:l(["summary__question",{warning:r.isInputCityValid}])},e(s.TITLE.cities),3),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",W,e(s.CITY)+" "+e(s.TO_ADDRESS),1)]),t("div",Q,[t("div",J,[t("p",{class:l(["summary__question",{warning:!s.APPLICATION_NAME}])},e(s.TITLE.naming),3),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",K,e(s.APPLICATION_NAME),1)]),t("div",z,[t("div",j,[t("p",{class:l(["summary__question",{warning:!r.descriptionValidation}])},e(s.TITLE.description),3),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",X,"Описание: "+e(s.APPLICATION_DESCRIPTION||" добавьте описание"),1),t("p",Z," Кол-во: "+e(s.QUANTITY||0)+" шт ",1),t("p",x,"Общий вес: "+e(s.WEIGHT||0)+" кг",1),t("p",ss,"Общий объём: "+e(s.CAPACITY||0)+" м³",1),s.$route.name!=="cost-calculation"?(i(),_("p",ts," Дата готовности: "+e(s.DATE_OF_READINESS||" добавьте дату готовности"),1)):a("",!0)]),t("div",es,[t("div",is,[t("p",{class:l(["summary__question",{warning:!s.SERVICES.length&&!s.COMMENT_FOR_SERVICE}])},e(s.TITLE.additional_services),3),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("div",os,[t("ul",as,[(i(!0),_(L,null,Y(s.SERVICES,u=>(i(),_("li",{class:"summary__li",key:u.id},e(u),1))),128)),s.COMMENT_FOR_SERVICE?(i(),_("li",ns,e(s.COMMENT_FOR_SERVICE),1)):a("",!0)])])]),t("div",_s,[t("div",rs,[t("p",cs,e(s.TITLE.delivery_type),1),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",ls,e(s.SHIPPING),1)]),t("div",ms,[t("div",ps,[t("p",{class:l(["summary__question",{warning:!s.ADDRESS_FROM.from_city||!s.ADDRESS_FROM.from_address}])}," Точный адрес забора груза ",2),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",us,e(s.ADDRESS_FROM.from_city)+" "+e(s.ADDRESS_FROM.from_address),1)]),s.$route.name!=="cost-calculation"?(i(),_("div",hs,[t("div",Ts,[t("p",{class:l(["summary__question",{warning:!s.FACTORY_CONTACT.agent_fullname||!s.FACTORY_CONTACT.agent_phone_number||!s.FACTORY_CONTACT.agent_email}])}," Контакты представителя фабрики ",2),o(n,{icon:"pen-to-square",class:"icon-edit"})]),t("p",ds,e(s.FACTORY_CONTACT.agent_fullname)+" "+e(s.FACTORY_CONTACT.agent_phone_number)+" "+e(s.FACTORY_CONTACT.agent_email),1)])):a("",!0),this.$route.path==="/customer"?(i(),_("div",{key:1,onClick:c[0]||(c[0]=C(()=>{},["stop"])),class:"summary__item disabled",id:"companyName"},[Cs,t("p",As,e(r.companyName),1)])):a("",!0),this.$route.path==="/customer"?(i(),_("div",{key:2,onClick:c[1]||(c[1]=C(()=>{},["stop"])),class:"summary__item disabled",id:"companyDetals"},[Es,t("p",Is,e(r.bankName),1)])):a("",!0),t("div",Ss,[o(I,{class:"uploadFoto bottom"}),r.showEditBtn?(i(),h(n,{key:0,icon:"pen-to-square",class:"icon-edit",onClick:s.edit},null,8,["onClick"])):a("",!0)]),o(S),t("div",Os,[this.$route.path!=="/customer"?(i(),h(O,{key:0,class:l(["btn run-btn",{disabled:!m.isApplicationComplete}]),onClick:r.goToCustomerPage,disabled:!m.isApplicationComplete},{default:A(()=>[v("Далее "),o(n,{icon:"fa-solid fa-chevron-right icon"})]),_:1},8,["class","onClick","disabled"])):a("",!0),m.isApplicationComplete?a("",!0):(i(),_("p",Ns,"Пожалуйста заполните все поля")),m.showPreloader?(i(),h(N,{key:2})):a("",!0),m.showError?(i(),_("p",Rs," Ошибка при отправке заявки ")):a("",!0)])]),s.DIALOG?(i(),h(y,{key:0},{default:A(()=>[o(R)]),_:1})):a("",!0)])}const ws=M(V,[["render",ys],["__scopeId","data-v-28fa3964"]]);export{ws as A};
