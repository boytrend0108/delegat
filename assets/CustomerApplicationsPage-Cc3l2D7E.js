import{o as s,c as r,d as e,b as O,_ as D,v as h,p as I,h as f,m as v,F as g,i as N,t as a,r as l,H as R,y as M,Y as H,f as _,g as u,w as T,e as A,B as U,Z as Q,$ as j,T as q}from"./index-CJPfqmld.js";import{D as X}from"./DeletionConfirmationForm-8PC7RKvb.js";const z={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none"},J=e("g",{stroke:"#416782","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","clip-path":"url(#a)"},[e("path",{d:"M16.875 3.75H3.125a.625.625 0 0 0-.625.625v11.25c0 .345.28.625.625.625h13.75c.345 0 .625-.28.625-.625V4.375a.625.625 0 0 0-.625-.625M5.938 7.5h8.125M5.938 10h8.125M5.938 12.5h8.125"})],-1),K=e("defs",null,[e("clipPath",{id:"a"},[e("path",{fill:"#fff",d:"M0 0h20v20H0z"})])],-1),Z=[J,K];function ee(t,i){return s(),r("svg",z,[...Z])}const te={render:ee},se={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none"},oe=e("g",{fill:"#339DFF","clip-path":"url(#a)"},[e("path",{d:"M16.25 11.25H3.75a.625.625 0 0 0-.625.625V15c0 .345.28.625.625.625h12.5c.345 0 .625-.28.625-.625v-3.125a.625.625 0 0 0-.625-.625M16.25 4.375H3.75A.625.625 0 0 0 3.125 5v3.125c0 .345.28.625.625.625h12.5c.345 0 .625-.28.625-.625V5a.625.625 0 0 0-.625-.625"})],-1),ie=e("defs",null,[e("clipPath",{id:"a"},[e("path",{fill:"#fff",d:"M0 0h20v20H0z"})])],-1),re=[oe,ie];function _e(t,i){return s(),r("svg",se,[...re])}const de={render:_e},ce={name:"application-box-header",methods:{...O(["SET_FILTER_MODE"]),clickHandler(t,i){document.querySelectorAll(i).forEach(p=>{p.classList.remove("active")}),t.target.classList.add("active"),this.SET_FILTER_MODE(t.target.id)}},mounted(){this.SET_FILTER_MODE("newFirst"),this.SET_FILTER_MODE("compactView")}},$=t=>(I("data-v-f8fe571e"),t=t(),f(),t),ne={class:"applicationBoxHeaderComp"},ae={class:"applicationBoxHeaderComp__elem"},le={class:"applicationBoxHeaderComp__elem"},he=$(()=>e("img",{src:te,alt:"icon",id:"left",class:"icon"},null,-1)),Ee=$(()=>e("img",{src:de,alt:"icon",id:"left"},null,-1));function ue(t,i,o,p,n,d){return s(),r("div",ne,[e("div",ae,[e("button",{id:"newFirst",class:"applicationBoxHeaderComp__btn active left-filter",onClick:i[0]||(i[0]=c=>d.clickHandler(c,".left-filter"))}," Сначала новые "),e("button",{id:"oldFirst",class:"applicationBoxHeaderComp__btn left-filter",onClick:i[1]||(i[1]=c=>d.clickHandler(c,".left-filter"))},"Сначала старые ")]),e("div",le,[e("button",{id:"broaderView",class:"applicationBoxHeaderComp__btn right-filter",onClick:i[2]||(i[2]=c=>d.clickHandler(c,".right-filter"))},[he,h(" Расширенный вид ")]),e("button",{id:"compactView",class:"applicationBoxHeaderComp__btn active right-filter",onClick:i[3]||(i[3]=c=>d.clickHandler(c,".right-filter"))},[Ee,h(" Компактный вид ")])])])}const pe=D(ce,[["render",ue],["__scopeId","data-v-f8fe571e"]]),Te={name:"side-filter-mob",data(){return{status:[{id:"all",value:"Все"},{id:"unpublished",value:"Неопубликованные"},{id:"published",value:"Опубликованные"},{id:"in_progress",value:"В процессе"},{id:"completed",value:"Завершённые"}],type:[{id:"all_type",value:"Все"},{id:"delivery_type",value:"Доставка"},{id:"cost",value:"Расчет стоимости"},{id:"search",value:"Поиск товара"}],companies:[{id:"all_comp",label:"Все"}],checked:!1,innerWidth:window.innerWidth}},computed:{...v(["FIRMS","FID","FILTER_STATUS","FILTER_TYPE"])},methods:{...O(["SET_FILTER_STATUS","SET_PAGE","SET_FILTER_TYPE"]),isChecked(){let t=this.FILTER_STATUS;typeof t=="object"&&(t="all"),document.querySelector(`#${t}`).checked=!0;let i=this.FILTER_TYPE;typeof i=="object"&&(i="all_type"),i==="delivery"&&(i="delivery_type"),document.querySelector(`#${i}`).checked=!0},selectStatus(t){this.SET_PAGE(!0),this.SET_FILTER_STATUS(t)},selectType(t){t==="delivery_type"&&(t="delivery"),this.SET_FILTER_TYPE(t)}},watch:{FID(){new Promise(t=>{this.companies.push({id:this.companies.length-1,label:this.FIRM[0].long_name}),t()}).then(()=>{document.querySelectorAll(".firms").forEach(i=>{i.label===this.FIRM[0].long_name&&(i.checked="true")})})}},mounted(){this.$route.query.type?(document.querySelector(`#${this.$route.query.type}`).checked=!0,document.querySelector("#all").checked=!0):this.isChecked()}},B=t=>(I("data-v-0d47c547"),t=t(),f(),t),Se={class:"sideFilterComp mob"},Ae={class:"fildset"},me=B(()=>e("legend",{class:"fildset__legend"}," Tип ",-1)),Re=["onClick"],Oe=["id"],De=["for"],Ie={class:"fildset"},fe=B(()=>e("legend",{class:"fildset__legend"}," Статус ",-1)),ye=["onClick"],ve=["id"],we=["for"];function Le(t,i,o,p,n,d){return s(),r("div",Se,[e("fieldset",Ae,[me,(s(!0),r(g,null,N(n.type,c=>(s(),r("div",{class:"radio-box",key:c.id,onClick:S=>d.selectType(c.value)},[e("input",{class:"input type",type:"radio",name:"type",id:c.id},null,8,Oe),e("label",{for:c.id,class:"fildset_lable"},a(c.value),9,De)],8,Re))),128))]),e("fieldset",Ie,[fe,(s(!0),r(g,null,N(n.status,c=>(s(),r("div",{class:"radio-box",key:c.id,onClick:S=>d.selectStatus(c.value)},[e("input",{class:"input mob",type:"radio",name:"status",id:c.id},null,8,ve),e("label",{for:c.id,class:"fildset_lable"},a(c.value),9,we)],8,ye))),128))])])}const Ce=D(Te,[["render",Le],["__scopeId","data-v-0d47c547"]]),W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAALCAYAAABPhbxiAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACHSURBVHgBnZDRDUAwFEXfYxFmYIDGIv5sIQhTWAYDSIzQRaT6WhVp0Nb96f04J819CIFh1VAC7IBhUtcgYkvdW7xLQmDrJdrSPNYd/pGoxzQ2zdmWZAz4Oi8+EiUyhQACfSTFa6iXkDgh/X5Jl2jLJm+S2mgKX6clyQr5EzCX9Bg6ltxXurgDSQtOKWf0LgkAAAAASUVORK5CYII=",ge={name:"application-box-header-mob",components:{SideFilterMob:Ce},data(){return{showDropdownLeft:!1,showDropdownRight:!1,selectNew:!0}},computed:{...v(["DIALOG","SHOW_SIDE_FILTER","SHOW_BURGER_MENU"])},methods:{...O(["SET_FILTER_MODE","SHOW_DIALOG","SET_SHOW_SIDE_FILTER"]),showDropdownFn(t){t.currentTarget.id==="left_dropdown"?this.showDropdownLeft=!this.showDropdownLeft:(this.showDropdownLeft=!1,this.SET_SHOW_SIDE_FILTER(!0),this.SHOW_DIALOG())},clickHandler(t,i){document.querySelectorAll(i).forEach(p=>{p.classList.remove("active")}),t.target.classList.add("active"),this.SET_FILTER_MODE(t.target.id)},selectTime(t){t.target.parentElement.id==="newFirst"?(this.selectNew=!0,this.SET_FILTER_MODE("newFirst")):(this.selectNew=!1,this.SET_FILTER_MODE("oldFirst"))}},mounted(){this.SET_FILTER_MODE("newFirst"),this.SET_FILTER_MODE("compactView")}},w=t=>(I("data-v-36194923"),t=t(),f(),t),Ne={class:"applicationBoxHeaderComp"},ke=w(()=>e("p",{class:"filter left"},"Cначала новые",-1)),be={class:"li-wr",id:"newFirst"},Ue={class:"img-wr"},Fe={src:W,alt:"cначала новые"},Pe=w(()=>e("li",{class:"dropdown__li"},"Сначала новые",-1)),Me=w(()=>e("li",{class:"hr"},null,-1)),He={class:"li-wr",id:"old"},$e={class:"img-wr"},Be={src:W,alt:"cначала старые"},We=w(()=>e("li",{class:"dropdown__li"},"Сначала старые",-1)),xe=w(()=>e("p",{class:"filter right"},"Фильтры",-1)),Ve=[xe],Ge={key:0,class:"wrapper"},Ye=w(()=>e("div",{class:"filter_header"},[e("p",{class:"filter__title"},"Фильтры")],-1));function Qe(t,i,o,p,n,d){const c=l("side-filter-mob"),S=l("my-blue-btn"),m=l("my-dialog");return s(),r("div",Ne,[e("div",{class:"applicationBoxHeaderComp__elem",onClick:i[1]||(i[1]=R((...E)=>d.showDropdownFn&&d.showDropdownFn(...E),["stop"])),id:"left_dropdown"},[ke,n.showDropdownLeft?(s(),r("ul",{key:0,class:"dropdown",onClick:i[0]||(i[0]=R((...E)=>d.selectTime&&d.selectTime(...E),["stop"]))},[e("div",be,[e("div",Ue,[M(e("img",Fe,null,512),[[H,n.selectNew]])]),Pe]),Me,e("div",He,[e("div",$e,[M(e("img",Be,null,512),[[H,!n.selectNew]])]),We])])):_("",!0)]),e("div",{class:"applicationBoxHeaderComp__elem",onClick:i[2]||(i[2]=(...E)=>d.showDropdownFn&&d.showDropdownFn(...E)),id:"filters"},Ve),t.DIALOG?(s(),u(m,{key:0},{default:T(()=>[t.SHOW_SIDE_FILTER?(s(),r("div",Ge,[Ye,A(c),A(S,{style:{width:"100%"},onClick:i[3]||(i[3]=E=>t.SHOW_DIALOG())},{default:T(()=>[h("Показать заявки")]),_:1})])):_("",!0)]),_:1})):_("",!0)])}const je=D(ge,[["render",Qe],["__scopeId","data-v-36194923"]]),qe={name:"add-new-application",data(){return{url:"plus.svg"}},computed:{...v(["FID"])},methods:{...O(["SET_CLEAR_NEW_APPLICATION","SET_CLEAR_INVOICE_AND_PLIST","SET_IS_APPLICATION_COMPLETE","SET_CLEAR_IMG","SET_CLEAR_DOCS","SET_CLEAR_ADDITION_DATA","SET_CLEAR_SERVICES","CLEAR_SEARCH_PRODUCT_APPL","CLEAR_SELECTED_ORDERS"]),goTo(t){switch(this.SET_IS_APPLICATION_COMPLETE(!1),this.SET_CLEAR_SERVICES(),this.SET_CLEAR_ADDITION_DATA(),this.SET_CLEAR_NEW_APPLICATION(),this.SET_CLEAR_INVOICE_AND_PLIST(),this.SET_CLEAR_IMG(),this.SET_CLEAR_DOCS(),this.CLEAR_SEARCH_PRODUCT_APPL(),this.CLEAR_SELECTED_ORDERS(),t.target.id){case"delivery":this.$router.push("/start-application");break;case"cost_calc":this.$router.push("/cost-calculation?step=FromWhichCountry");break;case"search_product":this.$router.push("/search_product/?step=SearchProductComp");break}}}},F=t=>(I("data-v-67761af6"),t=t(),f(),t),Xe={class:"addNewApplication",id:"delivery"},ze=["src"],Je=F(()=>e("p",{class:"text",id:"delivery"}," Доставка и ТО",-1)),Ke={class:"addNewApplication",id:"cost_calc"},Ze=["src"],et=F(()=>e("p",{class:"text",id:"cost_calc"},[h(" Платная консультация и "),e("br"),h(" расчет стоимости ")],-1)),tt={class:"addNewApplication",id:"search_product"},st=["src"],ot=F(()=>e("p",{class:"text",id:"search_product"}," Поиск товара ",-1));function it(t,i,o,p,n,d){return s(),r("div",{class:"btn-box",onClick:i[0]||(i[0]=(...c)=>d.goTo&&d.goTo(...c))},[e("div",Xe,[e("img",{src:require("@/assets/images/icons/plus.png"),alt:"icon",class:"img",id:"delivery"},null,8,ze),Je]),e("div",Ke,[e("img",{src:require("@/assets/images/icons/plus.png"),alt:"icon",class:"img",id:"cost_calc"},null,8,Ze),et]),e("div",tt,[e("img",{src:require("@/assets/images/icons/plus.png"),alt:"icon",class:"img",id:"search_product"},null,8,st),ot])])}const rt=D(qe,[["render",it],["__scopeId","data-v-67761af6"]]),P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD4SURBVHgB7ZSxjcIwFIb/54uuuYJscHcbsAGBSdIgCgoYAEFADJASRAFsABNgRmACPEIoaFDkh0MDEXZAEQ0Sf2NLv9/n35beIzgUhJEvfryKzdPH9CAXUWLzyAWjb7E3rm/zwUj4pP9tUA8uESlT6bu8hwmD5rADQVWUEIFXm+lgnUtIgrpm+UMZMbIgeSCTrhOLeRaWgQU0toUQgZp5XmjOSqJLGOSAchKpoDVSlz9gIeWstyziBc1RBg3NVm2m/d31nhfrA/wAS8g+HIj9Rnv8W1SoU65kPfcU0DR7zCnHKNDN3EvcQNJD8FfVObbusUp4FOOtdAbdtUpPkNbKogAAAABJRU5ErkJggg==",_t={name:"customer-application",props:{order:{type:Object},chat:{type:Object}},data(){return{description:this.order.description,showElement:!0,showPreloader:!1,additional_services:[],innerWidth:window.innerWidth}},computed:{...v(["DELETE_ORDER_STATUS"]),dateCreated(){if(this.order.created_at)return this.order.created_at.split("").slice(0,10).join("")},showDeleteBtn2(){return this.innerWidth>600&&this.order.status==="UNPUBLISHED"}},methods:{...U(["PUBLISH_ORDER","CANCEL_CUSTOMER_ORDER"]),...O(["SET_CHANGE_ORDER_STATUS","SET_ACTIVE_MODULE","SET_SELECTED_ORDER","SET_DELETE_ORDER","SET_SHOW_DELETION_CONFIRMATION_FORM","SET_DELETE_ORDER_STATUS"]),cuttedText(){const t=document.querySelector(".item-desciption").innerText.slice(0,170)+"...";this.description=t},goToApplication(){this.SET_ACTIVE_MODULE("checkApplication"),this.SET_SELECTED_ORDER({order:this.order,chat:this.chat}),this.$router.push(`/customer/order/${this.order.id}?status=${this.order.status}`)},publishOrder(){this.showPreloader=!0,this.PUBLISH_ORDER(this.order.id).then(()=>{this.showPreloader=!1,this.SET_SELECTED_ORDER({order:this.order,chat:this.chat}),this.SET_CHANGE_ORDER_STATUS(),this.$router.push(`/customer/order/${this.order.id}?status=PUBLISHED&type=${this.order.type}`)})},deleteOrder(){this.SET_SHOW_DELETION_CONFIRMATION_FORM(!1),this.SET_DELETE_ORDER_STATUS(!1),this.showPreloader=!0,this.CANCEL_CUSTOMER_ORDER(this.order.id).then(()=>{this.SET_DELETE_ORDER(this.order),this.showElement=!1,this.showPreloader=!1}).catch(()=>{this.showPreloader=!1,alert("Ошибка при удалении заявки")})}},watch:{DELETE_ORDER_STATUS(){this.DELETE_ORDER_STATUS&&this.deleteOrder()}},mounted(){this.additional_services=Q(this.order.additional_services)}},k=t=>(I("data-v-46429af4"),t=t(),f(),t),dt={class:"header"},ct={class:"header__top"},nt={class:"wrapper"},at={key:0,class:"header__top-notPublished"},lt={key:1,class:"header__top-published"},ht={key:2,class:"header__top-finished"},Et={key:3,class:"header__top-published"},ut={class:"wrapper"},pt={class:"order-data"},Tt={class:"header__top-right"},St={class:"header__top-right"},At={class:"title-box"},mt={class:"title"},Rt={key:0,class:"subtitle"},Ot={key:1,class:"stats"},Dt=k(()=>e("hr",{class:"hr"},null,-1)),It={key:0,class:"address"},ft={class:"address__el"},yt=k(()=>e("p",{class:"address__el-up"},"Страна-эспортёр",-1)),vt={class:"address__el_down"},wt={class:"address__el"},Lt=k(()=>e("p",{class:"address__el-up"},"Город доставки",-1)),Ct={class:"address__el_down"},gt={key:1,class:"hr"},Nt={class:"description"},kt={key:0,class:"services__ul"},bt={key:1,class:"direction"},Ut=k(()=>e("p",{class:"address__el_down"}," Предполагаемое кол-во: ",-1)),Ft={class:"address__el_down"},Pt={class:"services__ul"},Mt={key:0,class:"title-description"},Ht={key:1,class:"title-description"},$t={class:"item-desciption"},Bt={class:"btn-wr"};function Wt(t,i,o,p,n,d){const c=l("my-type-of-service"),S=l("my-btn"),m=l("my-big-spinner");return n.showElement?(s(),r("div",{key:0,class:"customerApplication",onClick:i[1]||(i[1]=(...E)=>d.goToApplication&&d.goToApplication(...E))},[e("div",dt,[e("div",ct,[e("div",nt,[o.order.status==="UNPUBLISHED"?(s(),r("div",at," Неопубликована ")):_("",!0),o.order.status==="PUBLISHED"?(s(),r("div",lt,"Опубликована")):_("",!0),o.order.status==="COMPLETED"?(s(),r("div",ht,"Завершена")):_("",!0),o.order.status==="IN_PROGRESS"?(s(),r("div",Et," В процессе")):_("",!0),A(c,{type:o.order.type},null,8,["type"])]),e("div",ut,[e("div",pt,[e("p",Tt,"№ "+a(o.order.rand_id),1),e("div",St,[h("Создана "),e("span",null,a(d.dateCreated),1)])]),d.showDeleteBtn2?(s(),r("img",{key:0,src:P,alt:"Удалить",onClick:i[0]||(i[0]=R(E=>t.SET_SHOW_DELETION_CONFIRMATION_FORM(!0),["stop"])),class:"deleteIcon"})):_("",!0)])]),e("div",At,[e("h3",mt,a(o.order.name),1),o.order.type==="delivery"&&o.order.status!=="IN_PROGRESS"?(s(),r("p",Rt,"Специалист ещё не выбран")):_("",!0),o.order.type==="delivery"&&o.order.status==="PUBLISHED"?(s(),r("p",Ot,[h(" Отклики: "),e("span",null,a(o.order.offers_count),1),h("   Новые сообщения: "),e("span",null,a(o.order.unread_messages),1)])):_("",!0)])]),Dt,o.order.type==="delivery"?(s(),r("div",It,[e("div",ft,[yt,e("p",vt,a(o.order.from_country),1)]),e("div",wt,[Lt,e("p",Ct,a(o.order.to_city),1)])])):_("",!0),o.order.type==="delivery"?(s(),r("hr",gt)):_("",!0),e("div",Nt,[o.order.type==="delivery"?(s(),r("ul",kt,[h(" Услуги "),(s(!0),r(g,null,N(n.additional_services,(E,L)=>(s(),r("li",{class:"services__li",key:L},a(E),1))),128))])):_("",!0),o.order.type==="search"?(s(),r("div",bt,[Ut,e("p",Ft,a(o.order.amount),1)])):_("",!0),e("div",Pt,[o.order.type==="delivery"?(s(),r("p",Mt," Описание товаров ")):_("",!0),o.order.type==="search"?(s(),r("p",Ht," Описание функционала ")):_("",!0),e("p",$t,a(n.description),1)])]),e("div",Bt,[o.order.status==="UNPUBLISHED"?(s(),u(S,{key:0,class:"btn",onClick:d.publishOrder},{default:T(()=>[h(" Опубликовать ")]),_:1},8,["onClick"])):_("",!0),o.order.status==="UNPUBLISHED"?(s(),u(S,{key:1,class:"btn",onClick:R(d.goToApplication,["stop"])},{default:T(()=>[h("Редактировать")]),_:1},8,["onClick"])):_("",!0)]),n.showPreloader?(s(),u(m,{key:2})):_("",!0)])):_("",!0)}const xt=D(_t,[["render",Wt],["__scopeId","data-v-46429af4"]]),Vt={name:"customer-application-short",props:{order:{type:Object},chat:{type:Object}},data(){return{innerWidth:window.innerWidth,showElement:!0,showPreloader:!1,orderId:null}},computed:{...v(["DELETE_ORDER_STATUS","DELETED_ORDER_ID"]),dateCreated(){if(this.order.created_at)return this.order.created_at.split("").slice(0,10).join("")},showDeleteBtn(){return this.innerWidth<600&&this.order.status==="UNPUBLISHED"},showDeleteBtn2(){return this.innerWidth>600&&this.order.status==="UNPUBLISHED"}},methods:{...U(["PUBLISH_ORDER","CANCEL_CUSTOMER_ORDER"]),...O(["SET_CHANGE_ORDER_STATUS","SET_ACTIVE_MODULE","SET_SHOW_DELETION_CONFIRMATION_FORM","SET_SELECTED_ORDER","SET_DELETE_ORDER","SET_DELETE_ORDER_STATUS","SET_DELETED_ORDER_ID"]),goToApplication(){this.SET_ACTIVE_MODULE("checkApplication"),this.$router.push(`/customer/order/${this.order.id}?status=${this.order.status}&type=${this.order.type}`)},publishOrder(){this.PUBLISH_ORDER(this.order.id).then(()=>{this.SET_SELECTED_ORDER({order:this.order,chat:this.chat}),this.SET_CHANGE_ORDER_STATUS(),this.$router.push(`/customer/order/${this.order.id}?status=PUBLISHED&type=${this.order.type}`)})},showDeleteConfirmForm(t){this.SET_DELETED_ORDER_ID(t),this.SET_SHOW_DELETION_CONFIRMATION_FORM(!0)},async deleteOrder(){debugger;this.SET_SHOW_DELETION_CONFIRMATION_FORM(!1),this.SET_DELETE_ORDER_STATUS(!1),this.showPreloader=!0,this.CANCEL_CUSTOMER_ORDER().then(()=>{this.$emit("delete_order",this.DELETED_ORDER_ID),this.SET_DELETE_ORDER(),this.showElement=!1,this.showPreloader=!1}).catch(()=>{this.showPreloader=!1})}},watch:{DELETE_ORDER_STATUS(){this.DELETE_ORDER_STATUS&&this.deleteOrder()}}},x=t=>(I("data-v-e916a03f"),t=t(),f(),t),Gt={class:"header"},Yt={class:"header__top"},Qt={class:"wrapper"},jt={class:"status"},qt={key:0,class:"header__top-notPublished"},Xt={key:1,class:"header__top-published"},zt={key:2,class:"header__top-finished"},Jt={key:3,class:"header__top-published"},Kt={class:"order-data"},Zt={class:"header__top-right"},es={class:"header__top-right"},ts={class:"title-box"},ss={class:"name-box"},os={class:"title"},is={key:0,class:"subtitle"},rs={class:"wr"},_s={class:"bottom"},ds={key:0,class:"direction"},cs={class:"address__el_down"},ns={class:"address__el_down"},as={key:1,class:"direction"},ls=x(()=>e("p",{class:"address__el_down"}," Предполагаемое кол-во: ",-1)),hs={class:"address__el_down"},Es={key:0,class:"stats"},us={key:0},ps={key:1},Ts={class:"btn-wr"},Ss=x(()=>e("img",{src:P,alt:"удалить"},null,-1));function As(t,i,o,p,n,d){const c=l("my-type-of-service"),S=l("font-awesome-icon"),m=l("my-btn"),E=l("my-color-btn"),L=l("my-big-spinner");return n.showElement?(s(),r("div",{key:0,class:"customerApplicationShort",onClick:i[3]||(i[3]=(...C)=>d.goToApplication&&d.goToApplication(...C))},[e("div",Gt,[e("div",Yt,[e("div",Qt,[e("div",jt,[o.order.status==="UNPUBLISHED"?(s(),r("div",qt," Неопубликована ")):_("",!0),o.order.status==="PUBLISHED"?(s(),r("div",Xt,"Опубликована")):_("",!0),o.order.status==="COMPLETED"?(s(),r("div",zt,"Завершена")):_("",!0),o.order.status==="IN_PROGRESS"?(s(),r("div",Jt," В процессе")):_("",!0)]),A(c,{type:o.order.type},null,8,["type"])]),e("div",{class:"wrapper",onClick:i[1]||(i[1]=R(()=>{},["stop"]))},[e("div",Kt,[e("p",Zt,"№ "+a(o.order.rand_id),1),e("div",es,[h("Создана "),e("span",null,a(d.dateCreated),1)])]),d.showDeleteBtn2?(s(),r("img",{key:0,src:P,alt:"Удалить",onClick:i[0]||(i[0]=C=>d.showDeleteConfirmForm(o.order.id)),class:"deleteIcon"})):_("",!0)])]),e("div",ts,[e("div",ss,[e("h3",os,a(o.order.name),1)]),o.order.type==="delivery"&&o.order.status!=="IN_PROGRESS"?(s(),r("p",is," Специалист ещё не выбран ")):_("",!0),e("div",rs,[e("div",_s,[o.order.type==="delivery"||o.order.type==="cost"?(s(),r("div",ds,[e("p",cs,a(o.order.from_country),1),A(S,{icon:"fa-solid fa-arrow-right"}),e("p",ns,a(o.order.to_city),1)])):_("",!0),o.order.type==="search"?(s(),r("div",as,[ls,e("p",hs,a(o.order.amount),1)])):_("",!0)]),o.order.type==="delivery"?(s(),r("p",Es,[o.order.status==="PUBLISHED"&&o.order.offers_count?(s(),r("span",us," Отклики: "+a(o.order.offers_count),1)):_("",!0),h("   "),o.order.status!=="UNPUBLISHED"&&o.order.unread_messages?(s(),r("span",ps," Новые сообщения: "+a(o.order.unread_messages),1)):_("",!0)])):_("",!0)])]),e("div",Ts,[o.order.status==="UNPUBLISHED"?(s(),u(m,{key:0,class:"btn",onClick:R(d.goToApplication,["stop"])},{default:T(()=>[h("Редактировать")]),_:1},8,["onClick"])):_("",!0),o.order.status==="UNPUBLISHED"?(s(),u(m,{key:1,class:"btn",onClick:R(d.publishOrder,["stop"])},{default:T(()=>[h("Опубликовать")]),_:1},8,["onClick"])):_("",!0),d.showDeleteBtn?(s(),u(E,{key:2,class:"btn-delete",onClick:i[2]||(i[2]=R(C=>t.SET_SHOW_DELETION_CONFIRMATION_FORM(!0),["stop"]))},{default:T(()=>[Ss]),_:1})):_("",!0)])]),n.showPreloader?(s(),u(L,{key:0})):_("",!0)])):_("",!0)}const ms=D(Vt,[["render",As],["__scopeId","data-v-e916a03f"]]),Rs={components:{ApplicationBoxHeader:pe,AddNewApplication:rt,CustomerApplication:xt,CustomerApplicationShort:ms,ApplicationBoxHeaderMob:je,DeletionConfirmationForm:X},data(){return{orders:[],showNote:!1,innerWidth:window.innerWidth,showDeletionConfirmationForm:!1,scroll:null,networkError:!1}},computed:{...v(["CUSTOMER_ORDERS","SHOW_DELETION_CONFIRMATION_FORM","INPUT_VALIDATION_ERR","FILTER_STATUS","FILTER_TYPE","FILTER_MODE_TIME","FILTER_MODE_VIEW","CHANGE_ORDER_STATUS","PAGE","CURRENT_USER"])},methods:{...U(["GET_CUSTOMER_ORDERS"]),...O(["SET_PAGE","SET_ACTIVE_MODULE","SET_SHOW_DELETION_CONFIRMATION_FORM","SET_SHOW_PRELOADER"]),goUp(){window.scrollTo(0,0)},goBack(){document.querySelector(".active").classList.remove("active"),this.SET_ACTIVE_MODULE("application"),this.$router.push("/customer?module=select_company")},async getOrders(){this.SET_PAGE(!0),this.showNote=!1,this.SET_SHOW_PRELOADER(!0),await this.GET_CUSTOMER_ORDERS({status:this.FILTER_STATUS,order_type:this.FILTER_TYPE,user_id:this.CURRENT_USER.uid}).then(()=>{this.orders=this.CUSTOMER_ORDERS,this.SET_SHOW_PRELOADER(!1),this.showNote=!this.CUSTOMER_ORDERS.length}).catch(t=>{console.log("compo ====>",t),this.SET_SHOW_PRELOADER(!1)})},deleteOrder(t){this.orders.filter(i=>i.id!==t)}},watch:{FILTER_STATUS(){this.getOrders()},FILTER_TYPE(){this.getOrders()},FILTER_MODE_TIME(){this.orders=this.orders.reverse()},orders(){this.orders.length?this.showNote=!1:this.showNote=!0}},mounted(){if(this.SET_PAGE(!0),this.getOrders().then(()=>{const t={rootMargin:"0px",threshold:.2},i=p=>{if(p[0].isIntersecting)if(this.SET_PAGE(),this.FILTER_MODE_TIME==="newFirst")this.GET_CUSTOMER_ORDERS({status:this.FILTER_STATUS,order_type:this.FILTER_TYPE,page:this.PAGE,user_id:this.CURRENT_USER.uid}).then(()=>{this.orders=[...this.orders,...this.CUSTOMER_ORDERS]});else return};new IntersectionObserver(i,t).observe(this.$refs.observer)}),document.querySelector("#myApplicationsNav"))document.querySelector("#myApplicationsNav").classList.add("active");else return;window.scrollTo(0,0),window.addEventListener("scroll",()=>{this.scroll=window.scrollY})}},Os=t=>(I("data-v-8dea8e8e"),t=t(),f(),t),Ds={class:"customerApplicationsPage"},Is={class:"customerApplicationPage__header"},fs=Os(()=>e("h1",{class:"title"},"Мои заявки",-1)),ys={class:"applicationsBoxMolule"},vs={key:1},ws={key:0,class:"note"},Ls={key:1,class:"list-wr transition"},Cs={key:2},gs={key:0,class:"note"},Ns={key:1,class:"list-wr transition"},ks={ref:"observer",class:"observer"};function bs(t,i,o,p,n,d){const c=l("add-new-application"),S=l("application-box-header"),m=l("application-box-header-mob"),E=l("my-validation-error-msg"),L=l("customer-application"),C=l("customer-application-short"),V=l("deletion-confirmation-form"),G=l("my-dialog"),Y=l("my-btn");return s(),r("div",Ds,[e("header",Is,[fs,A(c,{class:"btn-box"}),A(S),A(m)]),e("main",ys,[t.INPUT_VALIDATION_ERR?(s(),u(E,{key:0,errorMsg:t.INPUT_VALIDATION_ERR,class:"validationErrorMsg"},null,8,["errorMsg"])):_("",!0),t.FILTER_MODE_VIEW==="broaderView"?(s(),r("div",vs,[n.showNote?(s(),r("p",ws," Заявок с выбранными фильтрами нет ")):(s(),r("div",Ls,[A(j,{name:"orders_list"},{default:T(()=>[(s(!0),r(g,null,N(this.orders,(y,b)=>(s(),u(L,{key:b,order:y,class:"customerApplication slide-in-top",chat:y.chat},null,8,["order","chat"]))),128))]),_:1})]))])):_("",!0),t.FILTER_MODE_VIEW==="compactView"?(s(),r("div",Cs,[n.showNote?(s(),r("p",gs," Заявок с выбранными фильтрами нет")):(s(),r("div",Ns,[(s(!0),r(g,null,N(this.orders,(y,b)=>(s(),u(C,{onDelete_order:d.deleteOrder,key:b,order:y,chat:y.chat,class:"customerApplicationShort slide-in-top"},null,8,["onDelete_order","order","chat"]))),128))]))])):_("",!0)]),t.SHOW_DELETION_CONFIRMATION_FORM?(s(),u(G,{key:0,onClose_dialog:i[0]||(i[0]=y=>t.SET_SHOW_DELETION_CONFIRMATION_FORM(!1))},{default:T(()=>[t.SHOW_DELETION_CONFIRMATION_FORM?(s(),u(V,{key:0,buttonAction:"delete"})):_("",!0)]),_:1})):_("",!0),e("div",ks,null,512),A(q,{name:"up"},{default:T(()=>[n.scroll>1e3?(s(),u(Y,{key:0,class:"upBtn",onClick:d.goUp},{default:T(()=>[h("Наверх")]),_:1},8,["onClick"])):_("",!0)]),_:1})])}const Ps=D(Rs,[["render",bs],["__scopeId","data-v-8dea8e8e"]]);export{Ps as default};
