import{C as M}from"./ConfirmEmailForm-6TxgJ5gt.js";import{P as C,V as k,R as L,Q as F,U as N,m as S,B as b,b as x,W as D,X as W,_ as O,r as d,o as n,c as w,d as i,y as c,z as h,e as u,g as m,f as l,w as f,t as H,T as v,v as I,n as B,H as G,p as P,h as R}from"./index-BhtDRTVm.js";const U={name:"form-reg-customer",components:{MyFormOffer:C,ValidationErrors:k},data(){return{isValid:{name:!1,email:!1,phone:!1,password_1:!1,samePassword:!1},isBtnEnable:!1,showPass1:!0,showPass2:!0,value:{name:"",email:"",phone:"",password_1:"",password_2:""},regExp:{name:L,email:F,password_1:N},comparePasswordMsg:!1}},computed:{...S(["VALIDATION_ERRORS","IS_VALID"])},methods:{...b(["REGISTRATION"]),...x(["SWITCH_IS_VALID","SET_SHOW_LOGIN_FORM","SET_SHOW_CONFIRM_EMAIL","SET_SHOW_SIGNUP_FORM","SET_FORM_DATA","SET_VALIDATION_ERR","SET_SHOW_PRELOADER"]),goToSignInForm(){this.SET_VALIDATION_ERR("clear"),this.SET_SHOW_LOGIN_FORM(!0)},phoneValidation(e){this.isValid.phone=e.status,this.value.phone=e.phone,this.isValid.samePassword&&this.isValid.name&&this.isValid.email&&this.isValid.phone&&this.isValid.password_1===!0?this.isBtnEnable=!0:this.isBtnEnable=!1},checkFormValidation(e){this.isValid.samePassword&&this.isValid.name&&this.isValid.email&&this.isValid.phone&&this.isValid.password_1===!0&&(this.isBtnEnable=!0,e.removeAttribute("disabled"))},passwordValidationMsg(){return D(this)},comparePassword(){W(this)},validations(e){e.target.classList.add("invalid");const s=document.querySelector(".btn");s.setAttribute("disabled","disabled"),this.isBtnEnable=!1;const r=e.target.id;e.target.id==="password_2"?this.value.password_1===this.value.password_2?(e.target.classList.remove("invalid"),this.comparePassword(),this.checkFormValidation(s)):this.comparePassword():this.regExp[r].test(this.value[r])?(this.isValid[r]=!0,e.target.classList.remove("invalid"),this.checkFormValidation(s),this.comparePassword()):(this.isValid[r]=!1,this.comparePassword())},showPassword(e){const s=document.getElementById("password_1"),r=document.getElementById("password_2");switch(e){case"1":if(s.attributes.type.textContent==="password"){s.attributes.type.textContent="text",this.showPass1=!this.showPass1;return}s.attributes.type.textContent==="text"&&(s.attributes.type.textContent="password",this.showPass1=!this.showPass1);break;case"2":if(r.attributes.type.textContent==="password"){r.attributes.type.textContent="text",this.showPass2=!this.showPass2;return}else r.attributes.type.textContent="password",this.showPass2=!this.showPass2}},onSubmit(){this.SET_SHOW_PRELOADER(!0),this.SET_VALIDATION_ERR("clear");let e={full_name:this.value.name,email:this.value.email,password:this.value.password_1,phone_number:this.value.phone};this.REGISTRATION(e).then(()=>{this.SET_FORM_DATA(e),this.SET_SHOW_CONFIRM_EMAIL(!0),this.SET_SHOW_SIGNUP_FORM(!1),this.SET_SHOW_PRELOADER(!1)}).catch(()=>this.SET_SHOW_PRELOADER(!1))}}},p=e=>(P("data-v-a0c66c0d"),e=e(),R(),e),X={class:"dialog__content"},q=p(()=>i("h2",{class:"form-title"},"Регистрация",-1)),z={class:"input-box"},Y=p(()=>i("label",{for:"name",class:"form-label"},"ФИО",-1)),Q={class:"input-box"},j=p(()=>i("label",{for:"email",class:"form-label"},"E-mail",-1)),J={class:"input-box"},K=p(()=>i("label",{for:"password",class:"form-label"},"Пароль",-1)),Z={key:0,class:"error-msg"},$={class:"input-box"},ss=p(()=>i("label",{for:"phone",class:"form-label"},"Повторите пароль",-1)),es={key:0,class:"error-msg"};function ts(e,s,r,V,a,o){const E=d("my-phone-code"),_=d("font-awesome-icon"),y=d("my-btn"),g=d("validation-errors"),A=d("router-link"),T=d("MyFormOffer");return n(),w("section",X,[i("form",{class:"form",id:"reg-form",onSubmit:s[12]||(s[12]=G((...t)=>o.onSubmit&&o.onSubmit(...t),["prevent"]))},[q,i("div",z,[Y,c(i("input",{class:"input-login",type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>a.value.name=t),onInput:s[1]||(s[1]=(...t)=>o.validations&&o.validations(...t)),placeholder:"ФИО"},null,544),[[h,a.value.name,void 0,{trim:!0}]])]),i("div",Q,[j,c(i("input",{class:"input-login",type:"email",id:"email","onUpdate:modelValue":s[2]||(s[2]=t=>a.value.email=t),onInput:s[3]||(s[3]=(...t)=>o.validations&&o.validations(...t)),placeholder:"E-mail"},null,544),[[h,a.value.email,void 0,{trim:!0}]])]),u(E,{onPhoneValidation:o.phoneValidation},null,8,["onPhoneValidation"]),i("div",J,[K,c(i("input",{type:"password",class:"input-login",id:"password_1","onUpdate:modelValue":s[4]||(s[4]=t=>a.value.password_1=t),onInput:s[5]||(s[5]=(...t)=>o.validations&&o.validations(...t)),placeholder:"Пароль"},null,544),[[h,a.value.password_1,void 0,{trim:!0}]]),a.showPass1?(n(),m(_,{key:0,icon:"fa-solid fa-eye",onClick:s[6]||(s[6]=t=>o.showPassword("1"))})):l("",!0),a.showPass1?l("",!0):(n(),m(_,{key:1,icon:"fa-solid fa-eye-slash",class:"icon",onClick:s[7]||(s[7]=t=>o.showPassword("1"))})),u(v,{name:"fade"},{default:f(()=>[o.passwordValidationMsg()?(n(),w("p",Z,H(o.passwordValidationMsg()),1)):l("",!0)]),_:1})]),i("div",$,[ss,c(i("input",{class:"input-login",type:"password",id:"password_2","onUpdate:modelValue":s[8]||(s[8]=t=>a.value.password_2=t),onInput:s[9]||(s[9]=(...t)=>o.validations&&o.validations(...t)),placeholder:"Пароль"},null,544),[[h,a.value.password_2,void 0,{trim:!0}]]),a.showPass2?(n(),m(_,{key:0,icon:"fa-solid fa-eye",class:"icon",onClick:s[10]||(s[10]=t=>o.showPassword("2"))})):l("",!0),a.showPass2?l("",!0):(n(),m(_,{key:1,icon:"fa-solid fa-eye-slash",onClick:s[11]||(s[11]=t=>o.showPassword("2"))})),u(v,{name:"fade"},{default:f(()=>[a.comparePasswordMsg?(n(),w("p",es,"Пароли не совпадают")):l("",!0)]),_:1})]),u(y,{type:"submit",class:B(["btn",{BtnEnable:!a.isBtnEnable}]),disabled:!a.isBtnEnable},{default:f(()=>[I("Зарегистрироваться")]),_:1},8,["class","disabled"])],32),e.VALIDATION_ERRORS?(n(),m(g,{key:0,"validation-errors":e.VALIDATION_ERRORS},null,8,["validation-errors"])):l("",!0),u(A,{to:"/customer/signin",class:"form__question",onClick:o.goToSignInForm},{default:f(()=>[I(" Уже есть аккaунт? ")]),_:1},8,["onClick"]),u(T)])}const os=O(U,[["render",ts],["__scopeId","data-v-a0c66c0d"]]),as={components:{FormRegCustomer:os,ConfirmEmailForm:M},computed:{...S(["IS_LOGGED_IN","SHOW_CONFIRM_EMAIL","SHOW_SIGNUP_FORM"])},methods:{...b(["VERIFY_EMAIL"])},mounted(){const e=this.$route.query.verification_code;e&&this.VERIFY_EMAIL(e)}},is=e=>(P("data-v-513469b7"),e=e(),R(),e),ns={class:"registration"},rs=is(()=>i("h1",{class:"visually-hidden"},"Регистрация",-1));function ls(e,s,r,V,a,o){const E=d("form-reg-customer"),_=d("confirm-email-form");return n(),w("div",ns,[rs,e.SHOW_SIGNUP_FORM===!0?(n(),m(E,{key:0})):l("",!0),e.SHOW_CONFIRM_EMAIL===!0?(n(),m(_,{key:1,class:"confirm-email"})):l("",!0)])}const _s=O(as,[["render",ls],["__scopeId","data-v-513469b7"]]);export{_s as default};
