import{V as u,m as A,b as f,B as O,aj as L,_ as M,r as l,o,c as t,e as N,w as C,d as a,t as _,f as s,g as c,v as d,af as m,p as R,h as w}from"./index-CJPfqmld.js";const D={name:"confirm-email-form",components:{ValidationErrors:u},data(){return{href:`mailto:${this.EMAIL}`,countdown:3,counter:"2:00",showPreloader:!1}},props:{isLeaving:Boolean},computed:{...A(["EMAIL","IS_LOGGED_IN","SHOW_CONFIRM_EMAIL","SHOW_CHECK_EMAIL","SEND_SECOND_EMAIL","VALIDATION_ERRORS","SITE_ROLE"]),title(){return this.SHOW_CONFIRM_EMAIL?"Подтвердите почту":this.SHOW_CHECK_EMAIL?"Проверьте почту":"+++"}},methods:{...f(["SET_VALIDATION_ERR","SET_SHOW_CHANGE_PASSWORD","SET_SHOW_CONFIRM_EMAIL","SET_SHOW_CHECK_EMAIL","SET_SEND_SECOND_EMAIL"]),...O(["SEND_EMAIL_AGAIN"]),countdownFn(e){setInterval(()=>{let r=Math.floor(e/60),n=e%60;n=n<10?"0"+n:n,this.counter=`${r}:${n}`,this.countdown--,e>0&&e--},1e3)},async sendEmailAgain(){this.showPreloader=!0,this.SEND_EMAIL_AGAIN().then(()=>this.showPreloader=!1).catch(()=>this.showPreloader=!1)}},mounted(){this.countdownFn(this.countdown)},setup(){L(()=>{m.commit("SET_RESET_FORM_STATUS"),m.commit("SET_SEND_SECOND_EMAIL",!1)})}},T=e=>(R("data-v-5dfd8b9d"),e=e(),w(),e),v={class:"confirm-email"},H={key:0,class:"confim-email__top"},y={key:0},k=T(()=>a("p",{class:"text"},"Мы выслали письмо для подтвеждения на почту",-1)),W=["href"],V={key:3,class:"confim-email__top"},b={class:"text"},F={class:"span"},B={key:4,class:"confim-email__bottom"},g={key:0,class:"text"},G={key:5,class:"btn"};function P(e,r,n,K,E,i){const I=l("my-semipolar-spinner"),S=l("validation-errors"),h=l("my-window");return o(),t("div",v,[N(h,{title:i.title},{default:C(()=>[e.SHOW_CONFIRM_EMAIL?(o(),t("div",H,[e.SHOW_CHECK_EMAIL?s("",!0):(o(),t("div",y,[k,a("p",null,[a("a",{class:"text email",href:E.href},_(e.EMAIL),9,W)])]))])):s("",!0),E.showPreloader?(o(),c(I,{key:1,class:"preloader"})):s("",!0),e.VALIDATION_ERRORS?(o(),c(S,{key:2,"validation-errors":e.VALIDATION_ERRORS},null,8,["validation-errors"])):s("",!0),e.SHOW_CHECK_EMAIL?(o(),t("div",V,[a("p",b,[d("Мы выслали письмо на почту "),a("span",F,_(e.EMAIL),1),d(" со ссылкой для восстановления пароля")])])):s("",!0),!e.SEND_SECOND_EMAIL&&e.$router.path===`/${e.SITE_ROLE}/profile`?(o(),t("div",B,[this.countdown>0?(o(),t("p",g,"Отправить письмо повторно через "+_(this.counter),1)):s("",!0),this.countdown<=0?(o(),t("button",{key:1,class:"btn slide-in-blurred-left",onClick:r[0]||(r[0]=(...p)=>i.sendEmailAgain&&i.sendEmailAgain(...p))}," Отправить письмо повторно ")):s("",!0)])):s("",!0),e.SEND_SECOND_EMAIL?(o(),t("p",G,"Повторное письмо отравлено. Проверьте почту "+_(e.EMAIL),1)):s("",!0)]),_:1},8,["title"]),d("> ")])}const j=M(D,[["render",P],["__scopeId","data-v-5dfd8b9d"]]);export{j as C};
