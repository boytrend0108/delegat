import{V as p,m as E,B as O,b as S,aj as w,_ as y,r as c,o as s,c as D,d as h,t as C,g as r,f as o,e as g,af as v}from"./index-BueGtXLM.js";import{M as I}from"./MyWrongFileFormat-DdrKquMM.js";const R={name:"contract-comp",components:{ValidationErrors:p,MyWrongFileFormat:I},props:{id:{type:String}},data(){return{href_templates:"",href2:"",showPreloader:!1}},computed:{...E(["DOCS","SITE_ROLE","VALIDATION_ERRORS","WRONG_FILE"]),note(){const t={provider:"Скачайте договор, подпишите и загрузите в соответствующее поле",factory_contract:"Загрузите договор в соответствующее поле",factory_invoice:"Загрузите платёжку на фабрику в соответствующее поле",logistics_contract:"Скачайте договор, подпишите и загрузите в соответствующее поле",logistics_transportation_request:"Скачайте д/с, подпишите и загрузите в соответствующее поле",logistics_completion_certificate:"Скачайте, подпишите и загрузите в соответствующее поле",customs_customs_clearance:"Скачайте договор, подпишите и загрузите в соответствующее поле",customs_additional_agreement:"Скачайте договор, подпишите и загрузите в соответствующее поле",customs_completion_certificate:"Скачайте, подпишите и загрузите в соответствующее поле"};for(let a in t)if(this.id===a)return t[a];return""},warning_note(){if(this.SITE_ROLE==="provider")switch(this.id){case"factory_contract":return"Заказчик ещё не загрузил договор в систему";case"factory_invoice":return"Заказчик ещё не загрузил договор в систему";case"logistics_contract":return"Заказчик ещё не загрузил договор в систему";case"logistics_transportation_request":return"Заказчик ещё не загрузил заявку в систему";case"logistics_completion_certificate":return"Заказчик ещё не загрузил акт в систему";case"customs_customs_clearance":return"Заказчик ещё не загрузил договор в систему";case"customs_additional_agreement":return"Заказчик ещё не загрузил дополнительное соглашение в систему";case"customs_completion_certificate":return"Заказчик ещё не загрузил акт в систему"}if(this.SITE_ROLE==="customer")switch(this.id){case"logistics_contract":return"Исполнитель ещё не загрузил договор в систему";case"logistics_transportation_request":return"Исполнитель ещё не загрузил заявку в систему";case"logistics_completion_certificate":return"Исполнитель ещё не загрузил акт в систему";case"customs_customs_clearance":return"Исполнитель ещё не загрузил договор в систему";case"customs_additional_agreement":return"Исполнитель ещё не загрузил дополнительное соглашение в систему";case"customs_completion_certificate":return"Исполнитель ещё не загрузил акт в систему"}},title(){return this.$route.path===`/provider/contracts/${this.$route.params.id}`&&this.id==="customs_additional_agreement"||this.id==="customs_additional_agreement"?"Дополнительное соглашение":this.id==="customs_completion_certificate"?"Акт выполненных работ":this.id==="customs_customs_clearance"?"Договор на таможенное оформление":this.id==="factory_contract"?"Договор с фабрикой-поставщиком":this.id==="factory_invoice"?"Платёжка на фабрику":this.id==="logistics_contract"?"Договор на логистические услуги":this.id==="logistics_transportation_request"?"Дополнительное соглашение/заявка на перевозку":this.id==="logistics_completion_certificate"?"Акт выполненных работ":""},upload_msg(){return this.$route.path===`/provider/contracts/${this.$route.params.id}`&&this.id==="customs_additional_agreement"?"Загрузить подписанный договор":this.id==="customs_additional_agreement"?"Договор со специалистом":this.id==="logistics_transportation_request"?"Загрузить заявку на перевозку":this.id==="customs_customs_clearance"||this.id==="logistics_contract"||this.id==="factory_contract"?"Загрузить подписанный договор":this.id==="factory_invoice"?"Загрузить платёжку на фабрику":this.id==="provider"?"Загрузить подписанный договор":this.id==="logistics_completion_certificate"||this.id==="customs_completion_certificate"?"Загрузить акт выполненных работ":""},name(){switch(this.SITE_ROLE){case"customer":return this.id==="customs_additional_agreement"||this.id==="customs_customs_clearance"?this.DOCS[this.id].name:this.DOCS[this.id].name;case"provider":return this.id==="customs_additional_agreement"||this.id==="customs_customs_clearance"?this.DOCS[this.id].name:this.DOCS[this.id].name}},name2(){switch(this.SITE_ROLE){case"customer":return this.DOCS.completed_docs[this.id].name;case"provider":return this.DOCS.completed_docs[this.id].name}},showCompletedDocs(){return this.SITE_ROLE==="customer"||this.id==="factory_contract"||this.id==="factory_invoice"?!1:!!this.DOCS.completed_docs[this.id].href},showTemplate(){switch(this.SITE_ROLE){case"provider":return this.id==="factory_invoice"||this.id==="factory_contract"?!1:!!this.DOCS.templates[this.id].href;case"customer":return!1}},showUploadItem(){switch(this.SITE_ROLE){case"customer":return this.id==="factory_contract"||this.id==="factory_invoice"?!(this.DOCS[this.id].href||this.DOCS[this.id].name):this.DOCS.completed_docs[this.id].href?!(this.DOCS[this.id].href||this.DOCS[this.id].name):!1;case"provider":return this.id==="factory_contract"||this.id==="factory_invoice"?!1:!this.DOCS[this.id].href}},showUploadedItem(){switch(this.SITE_ROLE){case"customer":return this.id==="customs_additional_agreement"?!!this.DOCS.customs_additional_agreement.name:this.id==="customs_completion_certificate"?!!this.DOCS.customs_completion_certificate.name:this.id==="customs_customs_clearance"?!!this.DOCS.customs_customs_clearance.name:!!this.DOCS[this.id].name;case"provider":return!!this.DOCS[this.id].href}},showProviderDocs(){return this.SITE_ROLE==="provider"||this.id==="factory_contract"||this.id==="factory_invoice"?!1:!!this.DOCS.completed_docs[this.id].href},showWarningInfo(){switch(this.SITE_ROLE){case"customer":return!(this.id==="factory_contract"||this.id==="factory_invoice"||this.DOCS.completed_docs[this.id].href);case"provider":return this.id==="factory_contract"||this.id==="factory_invoice"?!this.DOCS[this.id].href:this.DOCS[this.id].href?!this.DOCS.completed_docs[this.id].href:!1}},showNote(){switch(this.SITE_ROLE){case"customer":return this.id==="factory_contract"||this.id==="factory_invoice"?!this.DOCS[this.id].href:this.DOCS.completed_docs[this.id].href?!this.DOCS[this.id].href:!1;case"provider":return this.id==="factory_contract"||this.id==="factory_invoice"?!1:!this.DOCS[this.id].href}},href(){return this.DOCS.completed_docs[this.id].href},showError(){if(!this.VALIDATION_ERRORS)return;const t=this.id.replaceAll("_","-");return!!this.VALIDATION_ERRORS.includes(t)}},methods:{...O(["CHECK_FILE_EXIST","GET_FILE_FROM_SERVER","GET_DOCS_TEMPLATES"]),...S(["SET_UPLOAD_DATA"])},mounted(){const t=this.$route.params.id;switch(this.showPreloader=!0,this.id){case"factory_contract":this.GET_FILE_FROM_SERVER({orderId:t,inputId:this.id}).then(()=>this.showPreloader=!1);break;case"factory_invoice":this.GET_FILE_FROM_SERVER({orderId:t,inputId:this.id}).then(()=>this.showPreloader=!1);break;default:this.GET_FILE_FROM_SERVER({orderId:t,inputId:this.id,site_role:"provider"}).then(()=>this.showPreloader=!1),this.GET_FILE_FROM_SERVER({orderId:t,inputId:this.id,site_role:"customer"}).then(()=>this.showPreloader=!1)}const a=()=>{this.showPreloader=!0,this.GET_FILE_FROM_SERVER({orderId:this.$route.params.id,inputId:this.id,site_role:"template"}).then(()=>{this.showPreloader=!1,this.href_templates=this.DOCS.templates[this.id].href})};if(this.SITE_ROLE==="provider"){if(this.id==="factory_contract"||this.id==="factory_invoice")return;a()}},setup(t){w((a,i)=>{a.params.id!==i.params.id&&v.commit("SET_UPLOAD_DATA",{file:"",name:"",id:t.id})})}},T=["id"],L={class:"title"},P={class:"UploadAndDownloadBox"},F={class:"uploadCompBox"};function A(t,a,i,N,n,e){const l=c("my-note"),d=c("my-download-item-from-server"),_=c("my-upload-item"),u=c("my-uploaded-item"),m=c("validation-errors"),f=c("MyWrongFileFormat");return s(),D("div",{id:i.id,class:"contractComp"},[h("h3",L,C(e.title),1),e.showWarningInfo?(s(),r(l,{key:0,note:e.warning_note,url:"info_red.svg",class:"warning_note"},null,8,["note"])):o("",!0),e.showNote?(s(),r(l,{key:1,class:"note",note:e.note},null,8,["note"])):o("",!0),h("div",P,[e.showTemplate?(s(),r(d,{key:0,href:n.href_templates,id:i.id,type:"Шаблон",fileName:e.title,showPreloader:n.showPreloader},null,8,["href","id","fileName","showPreloader"])):o("",!0),e.showProviderDocs?(s(),r(d,{key:1,href:e.href,id:i.id,fileName:t.DOCS.completed_docs[this.id].name,showPreloader:n.showPreloader},null,8,["href","id","fileName","showPreloader"])):o("",!0),h("div",F,[e.showUploadItem?(s(),r(_,{key:0,id:i.id,msg:e.upload_msg,showPreloader:n.showPreloader},null,8,["id","msg","showPreloader"])):o("",!0),e.showUploadedItem?(s(),r(u,{key:1,name:e.name,id:i.id},null,8,["name","id"])):o("",!0)]),e.showError?(s(),r(m,{key:2})):o("",!0),e.showCompletedDocs?(s(),r(d,{key:3,href:e.href,id:i.id,fileName:t.DOCS.completed_docs[this.id].name,showPreloader:n.showPreloader},null,8,["href","id","fileName","showPreloader"])):o("",!0)]),g(f,{id:i.id},null,8,["id"])],8,T)}const M=y(R,[["render",A],["__scopeId","data-v-ef36001a"]]);export{M as C};
