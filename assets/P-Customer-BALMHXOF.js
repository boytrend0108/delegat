import{B as S,_ as m,r as o,o as e,c as p,e as _,p as E,h as C,d as s,m as R,b as k,w as T,v as I,g as i,f as n,t as A}from"./index-BueGtXLM.js";import{B as P,N as w}from"./NewCompanyForm-DBKHJ4M6.js";import{R as $}from"./RadioListBox-DKGGyp8F.js";import{A as b}from"./ApplicationCheck-DSmFcUOA.js";import{B as v}from"./BankForm-NdoOZAKH.js";import{b as M}from"./ApplicationForm-DQaY3t7D.js";import"./ApplicationDocs-BMD8qhLb.js";import"./MyWrongFileFormat-DdrKquMM.js";import"./ApplicationUploadFoto-DKtxBwh_.js";const L={name:"companies-comp",components:{RadioListBox:$},methods:{...S(["GET_COMPANY_FROM_SERVER"])},mounted(){}},B=t=>(E("data-v-fb5c913c"),t=t(),C(),t),U={class:"myCompanies"},F=B(()=>s("h3",{class:"myCompanies__title"},"Мои фирмы",-1));function g(t,d,h,u,c,r){const a=o("radio-list-box");return e(),p("div",U,[F,_(a,{title:"Добавить фирму",id:"addNewCompany"})])}const Y=m(L,[["render",g],["__scopeId","data-v-fb5c913c"]]),x={name:"company-details",components:{RadioListBox:$},data(){return{note:"Для работы с нашим сервисом достаточно счета в RUB, но для работы с другими странами придется открыть валютный счет. Подробнее"}},computed:{...R(["FID"])}},V=t=>(E("data-v-85a3a4aa"),t=t(),C(),t),G={class:"myCompanies"},H=V(()=>s("h3",{class:"myCompanies__title"},"Реквизиты фирмы",-1));function K(t,d,h,u,c,r){const a=o("radio-list-box");return e(),p("div",G,[H,_(a,{"data-tooltip":t.FID?"":"Сначала надо добавить фирму",note:c.note,title:"Добавить реквизиты",id:"addCompanyDetails"},null,8,["data-tooltip","note"])])}const q=m(x,[["render",K],["__scopeId","data-v-85a3a4aa"]]),W={name:"footer-comp",data(){return{showPreloader:!1,error:!1}},computed:{...R(["FID","ORDER_TYPE","BANK"]),showBtn(){return!!(this.FID&&this.BANK[0].bic&&this.ORDER_TYPE)}},methods:{...S(["GO_TO_NEXT_STEP","CREATE_CUSTOMER_ORDER","COST_CALCULATION_ORDER_CREATE","CREATE_ORDER_SEARCH_PRODUCT"]),...k(["SET_CLEAR_NEW_APPLICATION","SET_FILTER_TYPE","CLEAR_SEARCH_PRODUCT_APPL","SET_ORDER_TYPE","SET_FILTER_STATUS"]),stepBack(){switch(localStorage.getItem("application_type")){case"delivery":this.$router.push("/customer/new-application?step=check");break;case"cost":this.$router.push("/cost-calculation/?step=ApplicationCheck");break;case"search":this.$router.push("/search_product/?step=SearchProductSummary");break}},createOrder(){switch(this.showPreloader=!0,this.SET_FILTER_STATUS("Все"),this.ORDER_TYPE){case"delivery":this.CREATE_CUSTOMER_ORDER().then(()=>{this.showPreloader=!1,this.SET_CLEAR_NEW_APPLICATION(),this.SET_FILTER_TYPE("Доставка"),localStorage.setItem("application_type",""),this.$router.push("/customer/my_applications?type=delivery"),this.SET_ORDER_TYPE("")}).catch(t=>{this.showPreloader=!1,this.error=!0,setTimeout(()=>{this.error=!1},3e3),console.log(t)});break;case"cost":this.COST_CALCULATION_ORDER_CREATE().then(()=>{this.showPreloader=!1,this.SET_FILTER_TYPE("Расчет стоимости"),localStorage.setItem("application_type",""),this.$router.push("/customer/my_applications?type=cost")}).catch(()=>{this.showPreloader=!1,this.showError=!0,setTimeout(()=>{this.showError=!1},3e3)});break;case"search":this.showPreloader=!0,this.CREATE_ORDER_SEARCH_PRODUCT().then(()=>{this.showPreloader=!1,this.SET_FILTER_TYPE("Поиск товара"),localStorage.setItem("application_type",""),this.$router.push("/customer/my_applications?type=search"),this.CLEAR_SEARCH_PRODUCT_APPL()}).catch(()=>{this.showPreloader=!1,this.showError=!0,setTimeout(()=>{this.showError=!1},3e3)});break}}}},j={class:"footer"},X={key:1,class:"error"},z={key:3,class:"warningMsg"};function J(t,d,h,u,c,r){const a=o("my-color-btn"),l=o("my-semipolar-spinner");return e(),p("footer",j,[_(a,{class:"backBtn",onClick:r.stepBack},{default:T(()=>[I("Назад ")]),_:1},8,["onClick"]),c.showPreloader?(e(),i(l,{key:0})):n("",!0),c.error?(e(),p("p",X," Ошибка при создании заявки ")):n("",!0),r.showBtn?(e(),i(a,{key:2,class:"shareBtn2",onClick:r.createOrder},{default:T(()=>[I(" Создать заявку ")]),_:1},8,["onClick"])):n("",!0),t.ORDER_TYPE?n("",!0):(e(),p("p",z,'Для продолжения нажмите кнопку "Назад"'))])}const Q=m(W,[["render",J],["__scopeId","data-v-8a9afa92"]]),Z={name:"m-select-company",components:{BanksComp:P,CompaniesComp:Y,CompanyDetails:q,FooterComp:Q},data(){return{note:"Для публикации заявки вы должны быть индивидуальным предпринимателем или иметь юридическое лицо"}},computed:{...R(["FIRMS"])},mounted(){this.$router.push({query:{module:"select_company"}})}},tt=t=>(E("data-v-4925c9bb"),t=t(),C(),t),et=tt(()=>s("h2",{class:"title"},"Выберите вашу фирму и реквизиты",-1));function ot(t,d,h,u,c,r){const a=o("my-note"),l=o("banks-comp"),y=o("companies-comp"),f=o("company-details"),O=o("footer-comp");return e(),p("main",null,[s("header",null,[et,_(a,{note:c.note,class:"note"},null,8,["note"])]),_(l),_(y,{class:"myCompanies"}),this.FIRMS.length?(e(),i(f,{key:0})):n("",!0),_(O,{class:"footer"})])}const st=m(Z,[["render",ot],["__scopeId","data-v-4925c9bb"]]),at={name:"m-customer-application",components:{ApplicationCheck:b},data(){return{companyName:` ${this.COMPANY_NAME}, ${this.INN}`,companyDetals:this.BANK_NAME,dateCreated:null,orderId:null,orderName:null}},computed:{...R(["CREATED_ORDERS_CUSTOMER","COMPANY_NAME","INN","BANK_NAME"])},methods:{...S(["GET_CUSTOMER_ORDERS","CANCEL_CUSTOMER_ORDER"]),cancelOrder(){this.CANCEL_CUSTOMER_ORDER(this.orderId).then(()=>{this.$refs.deleteMsg.style.display="inline",setTimeout(()=>{this.$router.push("/customer/my_applications")},1500)})}},created(){this.GET_CUSTOMER_ORDERS("unpublished").then(()=>{const t=this.CREATED_ORDERS_CUSTOMER[0].order;this.orderName=t.name,this.orderId=t.id,this.dateCreated=t.created_at.split("").slice(0,10).join("")})},mounted(){this.$router.push({query:{module:"check_application"}})}},D=t=>(E("data-v-6fd22614"),t=t(),C(),t),ct={class:"applicatioinSummary"},nt={class:"title"},rt={class:"applicationInfo"},it={class:"applicationNum"},_t=D(()=>s("div",{class:"applicationInfo__title"},"Номер заявки",-1)),pt={class:"applicationInfo__value"},lt={class:"applicationDate"},mt=D(()=>s("div",{class:"applicationInfo__title"},"Coздана",-1)),dt={class:"applicationInfo__value"},ht={class:"successDelete",ref:"deleteMsg"};function ut(t,d,h,u,c,r){const a=o("my-color-btn"),l=o("application-check");return e(),p("div",ct,[s("h2",nt,"Заявка "+A(this.orderName),1),s("div",rt,[s("div",it,[_t,s("div",pt,A(this.orderId),1)]),s("div",lt,[mt,s("div",dt,A(this.dateCreated),1)]),_(a,{class:"cancelBtn",onClick:r.cancelOrder},{default:T(()=>[I(" Отменить заявку ")]),_:1},8,["onClick"])]),s("p",ht," Заявка успешно отменена",512),_(l,{companyName:c.companyName,companyDetals:c.companyDetals},null,8,["companyName","companyDetals"])])}const Et=m(at,[["render",ut],["__scopeId","data-v-6fd22614"]]),Ct={components:{MSelectCompany:st,MCustomerApplication:Et,NewCompanyForm:w,BankForm:v,ApplicationForm:M},computed:{...R(["DIALOG","SHOW_SELECT_COMPANY_MODULE","ACTIVE_MODULE","BTN_ID"])}},Rt=t=>(E("data-v-8fa5b3ea"),t=t(),C(),t),Tt=Rt(()=>s("h1",{class:"visually-hidden"},"Страница заказчика",-1));function yt(t,d,h,u,c,r){const a=o("m-select-company"),l=o("m-customer-application"),y=o("new-company-form"),f=o("bank-form"),O=o("application-form"),N=o("my-dialog");return e(),p("section",null,[Tt,t.ACTIVE_MODULE==="application"?(e(),i(a,{key:0})):n("",!0),t.ACTIVE_MODULE==="checkApplication"?(e(),i(l,{key:1})):n("",!0),t.DIALOG?(e(),i(N,{key:2},{default:T(()=>[this.BTN_ID==="addNewCompany"?(e(),i(y,{key:0})):n("",!0),this.BTN_ID==="addCompanyDetails"?(e(),i(f,{key:1})):n("",!0),this.$route.query.module==="check_application"?(e(),i(O,{key:2})):n("",!0)]),_:1})):n("",!0)])}const Pt=m(Ct,[["render",yt],["__scopeId","data-v-8fa5b3ea"]]);export{Pt as default};
